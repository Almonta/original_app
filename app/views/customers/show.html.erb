<div class="container">
  <h2 class="page_title_en">Detail Customer</h2>
  <h5 class="page_title_ja"><%= t('views.title.customer_show') %></h5>
  <div class="row">
    <div class="col-lg-3 col-md-4">
      <div class="product_name_title">
        <p>
          <strong><%= t('views.title.customer_number') %>:</strong>
          <%= @customer.number %>
        </p>

        <p>
          <strong><%= t('views.title.customer_name') %>:</strong>
          <%= @customer.name %>
        </p>

        <% if @user_customer.present? %>
          <%= link_to user_customer_path(id: @user_customer.id), method: :delete do %>
            <i class="fas fa-star product_project_cancel">プロジェクトから解除する</i>
          <% end %>
        <% else %>
          <%= link_to user_customers_path(customer_id: @customer.id), method: :post do %>
            <i class="far fa-star product_project_registration">プロジェクトに登録する</i>
          <% end %>
        <% end %>
      </div>

      <div class="product_editer">
        <p class="editer">作成者：<%= @customer.user.name %></p>
        <p class="edit_link"><%= link_to t('views.button.edit'), edit_customer_path(@customer) if (current_user == @customer.user) || (current_user.name == "ゲスト") || (current_user.name == "ゲスト管理者") %></p>
      </div>
    </div>


    <div class="col-lg-9 col-md-8">
      <h4>ドキュメント</h4>
      <div class="position-absolute" style="top:70px; left:20px;">
        <%= link_to customer_customer_documents_path(@customer.id, general: "true") do %>
        <button type="button" class="btn btn-info general_document_button btn-lg">一般資料</button>
        <% end %>
      </div>
      <% if (current_user.department == 2) || (current_user.name == "ゲスト") || (current_user.name == "ゲスト管理者") %>
        <div class="position-absolute" style="top:70px; left:180px;">
          <%= link_to customer_customer_documents_path(@customer.id, technical: "true") do %>
          <button type="button" class="btn btn-info technical_document_button btn-lg">技術資料</button>
          <% end %>
        </div>
      <% end %>
    </div>

  </div>

  <h4>スケジュール</h4>
  <p>スケジュールの登録・編集は「計画部」所属者のみ可能です。</p>
  <p id="notice_schedule"><%= notice %></p>

  <div class="schedule_area">

<%
# 1
=begin %>
  <div class="schedule_errror_area">
    <%= render partial: 'schedules/error', locals: { schedule: @schedule, customer: @customer } %>
  </div>
<%
=end %>

    <div id="errror_explanation"></div>

    <div class="schedule_form">
      <%= render partial: 'schedules/form', locals: { schedule: @schedule, customer: @customer } %>
    </div>
    <div id="schedules_area">
      <%= render partial: 'schedules/index', locals: { schedules: @schedules, customer: @customer } %>
    </div>
    <div class="pagination">
      <%= paginate @schedules %>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-3 col-md-4">
      <ul class="list-group">
        <li class="list-group-item active">プロジェクトメンバー</li>
        <% @user_customers.each do |user_customer| %>
          <li class="list-group-item">
            <div class="row">
              <span class="col-7"><%= user_customer.user.name %></span>
              <span class="col-5"><%= user_customer.user.department_i18n %></span>
            </div>
          </li>
        <% end %>
      </ul>
    </div>

    <div class="col-lg-9 col-md-8">
      <h4>コンタクト</h4>
      <p id="notice"><%= notice %></p>
      <div id="customer_contacts_area" class="box">
        <%= render partial: 'customer_contacts/index', locals: { customer_contacts: @customer_contacts, customer:@customer } %>
      </div>
      <%= render partial: 'customer_contacts/form', locals: { customer_contact: @customer_contact, customer:@customer } %>

    </div>
  </div>
  <%= link_to t('views.button.back_home'), homes_path %>
</div>